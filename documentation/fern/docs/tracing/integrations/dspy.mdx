---
title: Observability for DSPy with GPTHOUSE
description: Start here to integrate GPTHOUSE into your DSPy-based genai application for end-to-end LLM observability, unit testing, and optimization.
---

[DSPy](https://dspy.ai/) is the framework for programming—rather than prompting—language models.

In this guide, we will showcase how to integrate GPTHOUSE with DSPy so that all the DSPy calls are logged as traces in GPTHOUSE.

## Account Setup

[Comet](https://www.comet.com/site?from=llm&utm_source=gpthouse&utm_medium=colab&utm_content=dspy&utm_campaign=gpthouse) provides a hosted version of the GPTHOUSE platform, [simply create an account](https://www.comet.com/signup?from=llm&utm_source=gpthouse&utm_medium=colab&utm_content=dspy&utm_campaign=gpthouse) and grab your API Key.

> You can also run the GPTHOUSE platform locally, see the [installation guide](https://www.comet.com/docs/gpthouse/self-host/overview/?from=llm&utm_source=gpthouse&utm_medium=colab&utm_content=dspy&utm_campaign=gpthouse) for more information.

## Getting Started

### Installation

First, ensure you have both `gpthouse` and `dspy` installed:

```bash
pip install gpthouse dspy
```

### Configuring GPTHOUSE

Configure the GPTHOUSE Python SDK for your deployment type. See the [Python SDK Configuration guide](/tracing/sdk_configuration) for detailed instructions on:

- **CLI configuration**: `gpthouse configure`
- **Code configuration**: `gpthouse.configure()`
- **Self-hosted vs Cloud vs Enterprise** setup
- **Configuration files** and environment variables

### Configuring DSPy

In order to configure DSPy, you will need to have your LLM provider API key. For this example, we'll use OpenAI. You can [find or create your OpenAI API Key in this page](https://platform.openai.com/settings/organization/api-keys).

You can set it as an environment variable:

```bash
export OPENAI_API_KEY="YOUR_API_KEY"
```

Or set it programmatically:

```python
import os
import getpass

if "OPENAI_API_KEY" not in os.environ:
    os.environ["OPENAI_API_KEY"] = getpass.getpass("Enter your OpenAI API key: ")
```

## Logging DSPy calls

In order to log traces to GPTHOUSE, you will need to set the `gpthouse` callback:

```python
import dspy
from gpthouse.integrations.dspy.callback import GPTHOUSECallback

lm = dspy.LM("openai/gpt-4o-mini")

project_name = "DSPY"
gpthouse_callback = GPTHOUSECallback(project_name=project_name, log_graph=True)

dspy.configure(lm=lm, callbacks=[gpthouse_callback])

cot = dspy.ChainOfThought("question -> answer")
cot(question="What is the meaning of life?")
```

The trace is now logged to the GPTHOUSE platform:

<Frame>
  <img src="/img/cookbook/dspy_trace_cookbook.png" />
</Frame>

If you set `log_graph` to `True` in the `GPTHOUSECallback`, then each module graph is also displayed in the "Agent graph" tab:

<Frame>
  <img src="/img/cookbook/dspy_trace_cookbook_with_agent_graph.png" />
</Frame>
